Наследуется от класса [[Персонажи]]

1. Визуально представлен равносторонним треугольником, одной из вершин направленным в сторону мышки (прицела). Она является точкой выстрела. 
2. Обладает дополнительным хитбоксом для [[Подбор Дропа|подбора]] [[Дроп|дропа]]
3. Всегда направлен точкой стрельбы в сторону курсора.
4. Умеет передвигаться через WASD  С помощью встроенных в unity методов передвижения.
5. Умеет [[Генерация выстрела|стрелять]] по ЛКМ
6. При [[Подбор Дропа|подборе]] ДОТов ([[Дроп]]) увеличиваются соовтетствующие переменные объектов массива.
7. Обладает тегом player.
8. имеет отдельный хитбокс для подбора дропа, = радиус хитбокса 200%. Находится в [[Слои| слое]] ground
Переменные:
1. Характеристики аналогично как в [[Персонажи]]. Значения этих переменных представлены переменной finalValue.
2. На основе файла [[Улучшаемые характеристики]] и [[Справочник ДОТов]] формируется массив объектов соответствующих ДОТов персонажа. 
3. Переменная isGodMode: bool.
4. Переменная evadeBeforeDash: float
5. Переменная isDashAvalible: bool
6. Переменнная dashRecovery: float -- хранит откат деша, значение (сколько дешей в секунду)

Методы переопределенные:
1. **Метод смерти**

Методы новые:
1. **Метод формирования массива объектов имеющихся дотов usableDotsArray**
2. **Метод обновления элемента массива ДОТов usableDotsArray**
3. Метод **Восстановления ХП
4. **Метод вращения за мышью**
5. **конструктор объектов наносимых дотов**

Создать **конструктор объектов наносимых дотов**: 
	Примечание: [[Улучшаемые характеристики]] = improvableCharacteristicDictionary
	[[Справочник ДОТов]] = dotsDictionary
	Маппинг: improvableCharacteristicDictionary.code = dotsDictionary.code 
	1. Объект содержит: code, DotDmg, DotDur, type, affectedChar
	2. Объект = значение из [[Улучшаемые характеристики]]:
		1. code = improvableCharacteristicDictionary.code
		2. affectedChar = dotsDictionary.affectedChar
		3. type = dotsDictionary.type
		4. DotDmg = improvableCharacteristicDictionary.finalDotDmg
		5. DotDur = improvableCharacteristicDictionary.finalDotDur

**Метод обновления элемента массива ДОТов usableDotsArray**
Принимает объект дропа (как набор переменных)
	1. Перебором по usableDotsArray найти объект ДОТа с соответствующим входному code 
		1. Проверить, какая переменная должна обновляться, finalDotDur или finalDotDmg (isDmgUpIfDot == true -- Означает урон).
			1. Проверить: если вторая переменная в объекте массива usableDotsArray = 0, то 
				1. взять из справочника [[Улучшаемые характеристики]] запись с искомым code, передать её в вызове **Метод добавления в массив ДОТов usableDotsArray** ([[Персонажи]]), завершить выполнение алгоритма.
			2. Если нет, то:
				1. На основе изменения Произвести перерасчет finalDotDur или finalDotDmg, используя переменные из [[Справочник ДОТов]] upgradeDotDmgX или upgradeDotDurX, соответственно. Пример: finalDotDur += upgradeDotDurX
	2. Если объект с искомым code не найден, взять из справочника [[Улучшаемые характеристики]] запись с искомым code, передать её в вызове **Метод добавления в массив ДОТов usableDotsArray** ([[Персонажи]])

**Метод формирования массива объектов имеющихся дотов usableDotsArray**:
	1. Получить из справочника [[Улучшаемые характеристики]] все записи с type == 0.
	2. Для каждой:
		1. Сформировать объект, используя **конструктор объектов наносимых дотов** ([[Персонажи]])
		2. обогатить type, взятым из [[Справочник ДОТов]] по code


При подборе [[Дроп|дропа]] прокачки, увеличивается переменная соответствующей характеристики по методу [[Подбор Дропа|подбора лута]]

**Метод смерти**
Проверить isGodMode:
	Если true, вывести сообщение "Ты бы умер", сделать actualHP = maxHp
	Если false, вызвать метод **Конец Игры** [[Наблюдатель]]




 Метод **Восстановления ХП**
	Округление до целочисленного в бОльшую сторону(actualHP += hpFromDropRestore)


**Метод Деша**
Точка входа: Игрок нажал на Space 
1. Проверить, что isDashAvalible == true. Если нет -- выйти из алгоритма. Иначе -- продолжить выполнение.
2. isDashAvaliable = false
3. evadeBeforeDash = evade
4. evade = 1
5. Запустить анимацию Деша
6. Переместить персонажа в скорость движения * 5 дальность в направлении точки стрельбы.
7. Выключить анимацию Деша.
8. evade = evadeBeforeDash
9.  асинхронно прождать 1/dashRecovery секунд:
	1. (Пример ниже)
10. isDashAvaliable = true
Пример асинхронного взаимодействия:

	private async void StartTimer(float duration)
	{
	    await Task.Delay((int)(1/dashRecovery * 1000)); // Задержка в миллисекундах
	    Debug.Log("Timer finished!");
	}



**Метод повышения уровня**
принимает значение уровня lvl
1. Взять переменные dmg, maxHP, attackSpeed. увеличить на 1.5 * lvl, но не меньше единицы и с округлением в бОльшую сторону. 

**Метод вращения за мышью**
public class RotateTowardsMouse : MonoBehaviour
{
    [Range(0.1f, 1f)]
    public float rotationSpeed = 0.5f; // 1 - мгновенное вращение, 0.1 - очень плавное
    void Update()
    {
        // Получаем позицию курсора в мировых координатах
        Vector3 mousePosition = Camera.main.ScreenToWorldPoint(Input.mousePosition);
        mousePosition.z = 0; // Для 2D игры
        // Направление от персонажа к курсору
        Vector3 direction = mousePosition - transform.position;
        // Угол поворота в градусах
        float targetAngle = Mathf.Atan2(direction.y, direction.x) * Mathf.Rad2Deg;
        // Текущий угол персонажа
        float currentAngle = transform.eulerAngles.z;
        // Плавное вращение с учетом rotationSpeed
        float newAngle = Mathf.LerpAngle(currentAngle, targetAngle, rotationSpeed);
        // Применяем поворот
        transform.rotation = Quaternion.Euler(0, 0, newAngle);
    }
}


