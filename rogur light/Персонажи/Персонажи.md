
1. По контуру модельки идет хитбокс, выступающий генератором событий [[Коллизия с уроном и Дотами]]
2. Переменная isEnemy: bool, отвечающая за то, является ли объект врагом или связанным с врагом.
3. Обладает тегом. тег заполняется в зависимости, [[Игровой персонаж|игрок]] или [[Враги|враг]].
4. Находится в слое [[Слои|слое]] enemy
5. Осуществляет поворот со скоростью rotateSpeed
Переменные:
1. Все характеристики берутся из файла [[Улучшаемые характеристики]] (по условию type == true) как отдельные переменные.
2. actualHP -- int -- переменная актуального хп
3. Добавляется массив recievedDots -- object array -- массив полученных (как цель воздействия) ДОТов. 
4.   usableDotsArray -- Массив объектов Имеющихся ДОТов
5. shootingModifierFirstArray, shootingModifierSecondArray, shootingModifierThirdArray -- массивы String, содержащие в себе code модификаторов стрельбы.
6. whileFlyModifiersArray, onCollisionModifiersArray, whenDestroyModifiersArray -- массивы String кодов модификаторов полета пули.
   
Методы:
1. Стрельба осуществляется через **метод Стрельбы
2. Обладает методом [[Генерация выстрела| Генерации выстрела]]
3. Обладает методом [[Коллизия с уроном и Дотами]]
4. Обладает **Методом смерти**, переопределяемым для [[Игровой персонаж]]
5. метод [[Выпадение Дропа]]
6. **конструктор объектов наносимых дотов**
7. **конструктор объектов Полученных дотов**
8. **Метод добавления в массив ДОТов usableDotsArray**
9. **Метод заполнения recievedDots массива полученных ДОТов**
10. **метод Проверки уворота**
11. **Метод получения урона до брони**
12. **Метод получения урона**
13. **Метод обработки воздействия полученных ДОТов**
14. **Метод применения модификаторов стрельбы**

Создать **конструктор объектов наносимых дотов**: 
	Примечание: [[Улучшаемые характеристики]] = improvableCharacteristicDictionary
	[[Справочник ДОТов]] = dotsDictionary
	Маппинг: improvableCharacteristicDictionary.code = dotsDictionary.code 
	1. Объект содержит: code, DotDmg, DotDur, type, affectedChar
	2. Объект = значение из [[Улучшаемые характеристики]]:
		1. code = improvableCharacteristicDictionary.code
		2. affectedChar = dotsDictionary.affectedChar
		3. type = dotsDictionary.type
		4. DotDmg = improvableCharacteristicDictionary.finalDotDmg
		5. DotDur = improvableCharacteristicDictionary.finalDotDur



Создать **конструктор объектов Полученных дотов**: 
	Примечание: Получает значения
	 [[Улучшаемые характеристики]] = improvableCharacteristicDictionary
	[[Справочник ДОТов]] = dotsDictionary
	Маппинг: improvableCharacteristicDictionary.code = dotsDictionary.code 
	1. Объект содержит: code, DotDmg, DotDur, type, affectedChar, count, tick
	2. Объект = значение, переданное в метод, в случае, если их не хватает, обогатить из справочников по маппингу:
		1. code = improvableCharacteristicDictionary.code
		2. affectedChar = dotsDictionary.affectedChar
		3. type = dotsDictionary.type,
		4. DotDmg =  dotsDictionary.baseDotDmg
		5. DotDur = dotsDictionary.baseDotDur
		6. affectedDamage = 0
		7. count = 1
		8. tick = 0;



**Метод Стрельбы**
	Принимает значения: 
	Запрашивает значение дамага, массива дотов, скорости атаки
	Стрелять можно если от последнего выстрела прошло 1/скорость атаки тиков.
		Если проверка пройдена, вызвать метод **Метод применения модификаторов стрельбы**
	


**Метод применения модификаторов стрельбы**
Принимает значения: 
 1. Взять значение shootingModifierFirstArray для каждого:
	 1. по code взять значение из [[Справочник модификаторов стрельбы]], определить type:
		 1. Если base, то использовать предсозданную точку стрельбы
		 2. Если circle, то распределить точки стрельбы, количеством, описанным в count, равномерно по окружности через параметр отступа от передней точки. 
		 3. Если semiCircle, то распределить точки стрельбы, количеством, описанным в count, равномерно по передней полуокружности
 2. Для каждой точки Взять значение shootingModifierSecondArray для каждого:
	 2. по code взять значение из [[Справочник модификаторов стрельбы]], определить type:
		 4. Если base, то Совершать только один выстрел
		 5. Если burst -- сформировать очередь из count количества выстрелов, с задержкой между ними 1/(count * atkSpeed) секунд. *Кулдаун будет отсчитываться от последнего выстрела в очереди*
 3. Для каждого выстрела: 
	 1. по code взять значение из [[Справочник модификаторов стрельбы]], определить type(Да, сейчас тут нет разницы, но я подозреваю, что она может быть, правда пока ХЭЗЭ какая):
		 1. Если base, то Создать один патрон [[Генерация выстрела]], Передав в него spread = (1 - accuracy из справочника) * 10, dmg, usableDotsArray, critChance, bulletflySpeed, bulletTimeAlive, whileFlyModifiersArray, onCollisionModifiersArray, whenDestroyModifiersArray, gameobjectId стреляющего
		 2. Если buckshot, то создать count патронов ([[Генерация выстрела]]), передавая в каждый spread = (1 - accuracy из справочника) * 10, dmg, usableDotsArray, critChance, bulletflySpeed, bulletTimeAlive, whileFlyModifiersArray, onCollisionModifiersArray, whenDestroyModifiersArray, gameobjectId









**Метод добавления в массив ДОТов usableDotsArray**
	Принимает объект ДОТа
		1. Добавить Объект ДОТа в массив usableDotsArray



**Метод заполнения recievedDotsArray массива полученных ДОТов**
	Примечание: ObjCode -- элемент массива, объект Дота
	forcedDotsArray -- Принятый методом массив (переданный в персонажа) (Полностью аналогичен usableDotsArray)
	1. Взять нулевой элемент forcedDotsArray. Проверить наличие forcedDotsArray.code == recievedDots.code
		1. Если такой есть в recievedDots, то:
			1. recievedDots.ObjCode.finalDotDur = forcedDotsArray.ObjCode.finalDotDur
			2. recievedDots.ObjCode.DotDmg +=1;
			3. recievedDots.ObjCode.count +=1
			4. tick = 0
		2. Если нет, то:
			1. Добавить полностью объект в массив recievedDots, обогатив недостающими переменными с указанными значениями c помощью метода **конструктор объектов Полученных дотов**


**метод Проверки уворота**
	1. Взять значение характеристики evade персонажа, умножить на 10.
	2. Сгенерировать случайное значение в диапазоне 1 - 100
	3. Проверить что, случайное значение > результата первого шага. Если да, вернуть true, иначе --  false


**Метод обработки воздействия полученных ДОТов**
	Условия: Постоянно обрабатывает массив объектов ДОТОв recievedDots, соответствующий по формату таковому у персонажа (forcedDotsArray).
	Примечание: ObjCode -- элемент массива, объект Дота
	Алгоритм:
		1. Запустить секундомер с шагом в 1с
		2. Проверить, что recievedDots не пустой. Если false, то ничего не делать. Иначе -- идти дальше по алгоритму.
		3. Перебором, для каждого элемента массива:
			1. По значению recievedDots.ObjCode.type определить тип воздействия ДОТа, на основании recievedDots.ObjCode.DotDmg -- временная переменная countedDotDmg: 
				1. если percent -- взять переменную персонажа maxHp, разделить на DotDmg, умножить на 100, округлить до целого в бОльшую сторону. countedDotDmg = Math.Ceiling(this.actualHp* recievedDots.ObjCode.DotDmg/100)
				2. если fixed -- оставить значение DotDmg неизменным. countedDotDmg = DotDmg
				3. если baseDmgPercent -- оставить значение DotDmg неизменным countedDotDmg = DotDmg
			2. По значению recievedDots.ObjCode.affectedChar определить, на какую переменную будет воздействовать ДОТ: Если Характеристика -- actualHP, то:
				1. countedDotDmg -= buffResist, с округлением в большую сторону. Не меньше нуля.
				2. **Метод получения урона**, в который передается countedDotDmg
				3. Проверить DotDur <= 1. Если да, удалить объект из массива. Иначе: DotDur -=1
			3. Иначе:
				1. Проверить, что recievedDots.ObjCode.tick < 1: 
					1. если да, то:  
						1. countedDotDmg -= buffResist, с округлением в большую сторону. Не меньше нуля.
						2. Изменить определенную выше характеристику: Значение характерстики - countedDotDmg
						3. recievedDots.ObjCode.affectedDamage += countedDotDmg
						4. recievedDots.ObjCode.tick ++
					2. Иначе: recievedDots.ObjCode.tick++
				2. Проверить DotDur <= 1. Если да, То взять характеристику, на которую оказывалось воздействие, прибавить к ней recievedDots.ObjCode.affectedDamage, удалить объект из массива. Иначе: DotDur -=1



**Метод получения урона до брони**
Принимает значение damage
Вычесть из принятого  значения показатель брони персонажа. итоговое значение передать в **Метод получения урона**.

**Метод получения урона**
	1. Принимает значение урона.
	2. Округление урона до целочисленного в бОльшую сторону
	3. actualHP -= значение урона
	4. Проверка что actualHP > 0
		1.  Если нет -- вызвать **[[Персонажи|Метод Смерти]]**

**Метод смерти**
	1. Вызвать метод [[Выпадение Дропа]]
	2. вызвать метод наблюдателя **Увеличение счетчика убийств**, передав в него deathPrice
	3. Удалить объект и префаб персонажа.


Метод **Вампиризма**
	Округление до целочисленного в бОльшую сторону(actualHP += vampire)



Наследники:
[[Игровой персонаж]]
[[Враги]]
